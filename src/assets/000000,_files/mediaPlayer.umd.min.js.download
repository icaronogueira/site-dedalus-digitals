(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("vue")):"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["mediaPlayer"]=t(require("vue")):e["mediaPlayer"]=t(e["Vue"])})("undefined"!==typeof self?self:this,(function(e){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s="fb15")}({2610:function(e,t,i){"use strict";i("516b")},"351e":function(e,t,i){"use strict";i("c838")},"3a08":function(e,t,i){},"4ad0":function(e,t,i){"use strict";i("8121")},"516b":function(e,t,i){},"64f8":function(e,t,i){},8121:function(e,t,i){},8550:function(e,t,i){"use strict";i("64f8")},8875:function(e,t,i){var n,r,a;(function(i,o){r=[],n=o,a="function"===typeof n?n.apply(t,r):n,void 0===a||(e.exports=a)})("undefined"!==typeof self&&self,(function(){function e(){var t=Object.getOwnPropertyDescriptor(document,"currentScript");if(!t&&"currentScript"in document&&document.currentScript)return document.currentScript;if(t&&t.get!==e&&document.currentScript)return document.currentScript;try{throw new Error}catch(m){var i,n,r,a=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,o=/@([^@]*):(\d+):(\d+)\s*$/gi,l=a.exec(m.stack)||o.exec(m.stack),c=l&&l[1]||!1,s=l&&l[2]||!1,u=document.location.href.replace(document.location.hash,""),d=document.getElementsByTagName("script");c===u&&(i=document.documentElement.outerHTML,n=new RegExp("(?:[^\\n]+?\\n){0,"+(s-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),r=i.replace(n,"$1").trim());for(var p=0;p<d.length;p++){if("interactive"===d[p].readyState)return d[p];if(d[p].src===c)return d[p];if(c===u&&d[p].innerHTML&&d[p].innerHTML.trim()===r)return d[p]}return null}}return e}))},"8bbf":function(t,i){t.exports=e},"8da3":function(e,t,i){"use strict";i("9c12")},"8fa9":function(e,t,i){},"95b6":function(e,t,i){"use strict";i("8fa9")},"96cf":function(e,t,i){var n=function(e){"use strict";var t,i=Object.prototype,n=i.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function c(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(S){c=function(e,t,i){return e[t]=i}}function s(e,t,i,n){var r=t&&t.prototype instanceof y?t:y,a=Object.create(r.prototype),o=new $(n||[]);return a._invoke=k(e,i,o),a}function u(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(S){return{type:"throw",arg:S}}}e.wrap=s;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",f={};function y(){}function v(){}function g(){}var b={};b[a]=function(){return this};var _=Object.getPrototypeOf,j=_&&_(_(V([])));j&&j!==i&&n.call(j,a)&&(b=j);var w=g.prototype=y.prototype=Object.create(b);function O(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function i(r,a,o,l){var c=u(e[r],e,a);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"===typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,o,l)}),(function(e){i("throw",e,o,l)})):t.resolve(d).then((function(e){s.value=e,o(s)}),(function(e){return i("throw",e,o,l)}))}l(c.arg)}var r;function a(e,n){function a(){return new t((function(t,r){i(e,n,t,r)}))}return r=r?r.then(a,a):a()}this._invoke=a}function k(e,t,i){var n=d;return function(r,a){if(n===m)throw new Error("Generator is already running");if(n===h){if("throw"===r)throw a;return A()}i.method=r,i.arg=a;while(1){var o=i.delegate;if(o){var l=C(o,i);if(l){if(l===f)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===d)throw n=h,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=m;var c=u(e,t,i);if("normal"===c.type){if(n=i.done?h:p,c.arg===f)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(n=h,i.method="throw",i.arg=c.arg)}}}function C(e,i){var n=e.iterator[i.method];if(n===t){if(i.delegate=null,"throw"===i.method){if(e.iterator["return"]&&(i.method="return",i.arg=t,C(e,i),"throw"===i.method))return f;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=u(n,e.iterator,i.arg);if("throw"===r.type)return i.method="throw",i.arg=r.arg,i.delegate=null,f;var a=r.arg;return a?a.done?(i[e.resultName]=a.value,i.next=e.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,f):a:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,f)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function $(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function V(e){if(e){var i=e[a];if(i)return i.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function i(){while(++r<e.length)if(n.call(e,r))return i.value=e[r],i.done=!1,i;return i.value=t,i.done=!0,i};return o.next=o}}return{next:A}}function A(){return{value:t,done:!0}}return v.prototype=w.constructor=g,g.constructor=v,v.displayName=c(g,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},O(x.prototype),x.prototype[o]=function(){return this},e.AsyncIterator=x,e.async=function(t,i,n,r,a){void 0===a&&(a=Promise);var o=new x(s(t,i,n,r),a);return e.isGeneratorFunction(i)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},O(w),c(w,l,"Generator"),w[a]=function(){return this},w.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function i(){while(t.length){var n=t.pop();if(n in e)return i.value=n,i.done=!1,i}return i.done=!0,i}},e.values=V,$.prototype={constructor:$,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var i in this)"t"===i.charAt(0)&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function r(n,r){return l.type="throw",l.arg=e,i.next=n,r&&(i.method="next",i.arg=t),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),N(i),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var r=n.arg;N(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,i,n){return this.delegate={iterator:V(e),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=t),f}},e}(e.exports);try{regeneratorRuntime=n}catch(r){Function("r","regeneratorRuntime = r")(n)}},"9c12":function(e,t,i){},a244:function(e,t,i){"use strict";i("f059")},a34a:function(e,t,i){e.exports=i("96cf")},a78e:function(e,t,i){var n,r;
/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */(function(a){var o;if(n=a,r="function"===typeof n?n.call(t,i,t,e):n,void 0===r||(e.exports=r),o=!0,e.exports=a(),o=!0,!o){var l=window.Cookies,c=window.Cookies=a();c.noConflict=function(){return window.Cookies=l,c}}})((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var i=arguments[e];for(var n in i)t[n]=i[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function i(n){function r(){}function a(t,i,a){if("undefined"!==typeof document){a=e({path:"/"},r.defaults,a),"number"===typeof a.expires&&(a.expires=new Date(1*new Date+864e5*a.expires)),a.expires=a.expires?a.expires.toUTCString():"";try{var o=JSON.stringify(i);/^[\{\[]/.test(o)&&(i=o)}catch(s){}i=n.write?n.write(i,t):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var l="";for(var c in a)a[c]&&(l+="; "+c,!0!==a[c]&&(l+="="+a[c].split(";")[0]));return document.cookie=t+"="+i+l}}function o(e,i){if("undefined"!==typeof document){for(var r={},a=document.cookie?document.cookie.split("; "):[],o=0;o<a.length;o++){var l=a[o].split("="),c=l.slice(1).join("=");i||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var s=t(l[0]);if(c=(n.read||n)(c,s)||t(c),i)try{c=JSON.parse(c)}catch(u){}if(r[s]=c,e===s)break}catch(u){}}return e?r[e]:r}}return r.set=a,r.get=function(e){return o(e,!1)},r.getJSON=function(e){return o(e,!0)},r.remove=function(t,i){a(t,"",e(i,{expires:-1}))},r.defaults={},r.withConverter=i,r}return i((function(){}))}))},b786:function(e,t,i){"use strict";i("f486")},c838:function(e,t,i){},f059:function(e,t,i){},f16a:function(e,t,i){"use strict";i("3a08")},f486:function(e,t,i){},fb15:function(e,t,i){"use strict";if(i.r(t),"undefined"!==typeof window){var n=window.document.currentScript,r=i("8875");n=r(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:r});var a=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);a&&(i.p=a[1])}var o=i("a34a"),l=i.n(o),c=i("8bbf"),s=Object(c["withScopeId"])("data-v-c7f415ec");Object(c["pushScopeId"])("data-v-c7f415ec");var u={class:"d-flex align-items-stretch justify-content-between w-100 player-flex-main-wrapper"},d={class:"flex player-flex-col-1"},p={class:"flex player-flex-col-inner w-100"},m={key:0,class:"flex flex-nowrap player-controls align-items-center justify-content-center mr-3"},h={class:"flex"},f={key:2,class:"player-article-image player-article-current"},y={class:"text-truncate flex w-100 justify-content-between"},v={class:"flex justify-content-between w-100 h-100 item-title-wrapper"},g={class:"flex w-100 justify-content-start"},b={key:0,class:"pt-1 graylink_darker text-truncate",style:{"font-size":"12px"}},_={key:1,class:"ml-2 tts-title-tag graylink_darker"},j={key:2,class:"ml-2 tts-title-tag text-primary-color"},w={key:0},O=Object(c["createVNode"])("span",{class:"left"},null,-1),x=Object(c["createVNode"])("span",{class:"right"},null,-1),k={class:"d-flex align-items-center justify-content-between w-100 order-0 player-time-wrapper",style:{"line-height":"1"}},C=Object(c["createVNode"])("span",{class:"player-icon icon16 icon-player-skip-back graylink"},null,-1),L=Object(c["createVNode"])("span",{class:"player-icon icon16 icon-player-previous graylink"},null,-1),N={key:0,class:"nav-item"},V={class:"nav-link m-0"},A=Object(c["createVNode"])("span",{class:"left"},null,-1),S=Object(c["createVNode"])("span",{class:"right"},null,-1),P={key:1,class:"nav-item"},B={class:"nav-link m-0",style:{display:"block"}},T=Object(c["createVNode"])("span",{class:"left"},null,-1),E=Object(c["createVNode"])("span",{class:"right"},null,-1),z=Object(c["createVNode"])("span",{class:"player-icon icon16 icon-player-next graylink"},null,-1),M=Object(c["createVNode"])("span",{class:"player-icon icon16 icon-player-skip-forth graylink"},null,-1),I={style:{position:"relative"},class:"w-100 my-1"},D={id:"audio-viz-big",style:{"text-align":"center",width:"240px",margin:"auto"}},R={class:"flex justify-content-end player-flex-col-3"},U={class:"flex"},X={class:"btn btn-sm graylink player-settings-controls",href:"javascript:void(0)"},Y={style:{overflow:"hidden"}},F=Object(c["createVNode"])("span",{class:"dropdown-header folder_dialog_line_header"},"Speed",-1),q={class:"inno_toolbar_button_menu_icon",style:{left:"10px"}},G=Object(c["createVNode"])("i",{class:"icon-checkmark check"},null,-1),H={class:"flex"},Z={class:"d-flex align-items-center media-player-minimize-btn-wrapper"},W=Object(c["createVNode"])("i",{class:"icon16 icon-player-minimize graylink"},null,-1),Q=Object(c["createVNode"])("i",{class:"icon24 icon-player-menu"},null,-1);Object(c["popScopeId"])();var J=s((function(e,t,i,n,r,a){var o=Object(c["resolveComponent"])("media-playlist"),l=Object(c["resolveComponent"])("player-tts-placeholder-image"),$=Object(c["resolveComponent"])("player-audio-placeholder-image"),J=Object(c["resolveComponent"])("ino-dropdown"),K=Object(c["resolveComponent"])("volume-control"),ee=Object(c["resolveDirective"])("tippy");return r.playlist.length?(Object(c["openBlock"])(),Object(c["createBlock"])("div",{key:0,class:["media-player right article-modal",{"maximized border-top":r.maximized&&!r.stopped,stopped:r.stopped,lg:!0,dragging_player:r.dragging_player}],style:a.translateStyles,onPointerdown:t[29]||(t[29]=function(){return a.dragStart&&a.dragStart.apply(a,arguments)})},[Object(c["createVNode"])(c["Transition"],{name:"translate-fade-down"},{default:s((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])(o,{active:"playlist"===r.tab||r.adding,maximized:r.maximized,isMobile:a.isMobile,playlist:r.playlist,current_item:r.current_item,paused:r.paused,onTogglePlaylist:t[1]||(t[1]=function(e){return r.tab=!r.tab&&"playlist"}),onClearPlaylist:a.clearPlaylist,onTogglePlay:a.togglePlay,onPlayItem:a.playItem,onRemovePlaylistItem:a.removePlaylistItem},null,8,["active","maximized","isMobile","playlist","current_item","paused","onClearPlaylist","onTogglePlay","onPlayItem","onRemovePlaylistItem"]),[[c["vShow"],!r.stopped&&"playlist"===r.tab]])]})),_:1}),Object(c["createVNode"])(c["TransitionGroup"],{name:"slide-fade",tag:"div",class:"h-100 mini-player"},{default:s((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])("div",{class:["justify-content-between border media-bg",{"align-items-start h-100":r.maximized,"align-items-center":!r.maximized,"d-flex":!r.stopped}],key:"active",style:{height:"40px"}},[Object(c["createVNode"])("div",{class:["flex-grow-1 d-flex h-100 align-items-center w-100",{"mr-2":!r.maximized}]},[Object(c["createVNode"])("div",u,[Object(c["createVNode"])("div",d,[Object(c["createVNode"])("div",p,[r.maximized?(Object(c["openBlock"])(),Object(c["createBlock"])("div",m,[Object(c["createVNode"])("div",h,[Object(c["createVNode"])("a",{href:"javascript:void(0)",class:["btn-playlist btn btn-sm",{active:"playlist"===r.tab||r.adding}],onClick:t[2]||(t[2]=function(e){return r.tab=!r.tab&&"playlist"})},[Object(c["createVNode"])("i",{class:["icon16 icon-player-playlist-menu",{bluelink:r.adding,graylink:!r.adding}]},null,2)],2)])])):Object(c["createCommentVNode"])("",!0),r.maximized&&a.item&&a.item.article_image?(Object(c["openBlock"])(),Object(c["createBlock"])("div",{key:1,class:"player-article-image player-article-current",style:a.item.image_style},null,4)):Object(c["createCommentVNode"])("",!0),r.maximized&&a.item&&!a.item.article_image?(Object(c["openBlock"])(),Object(c["createBlock"])("div",f,[a.item.tts_lang?(Object(c["openBlock"])(),Object(c["createBlock"])(l,{key:0})):Object(c["createCommentVNode"])("",!0),a.item.tts_lang?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])($,{key:1}))])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])("div",y,[Object(c["createVNode"])("div",v,[a.item?(Object(c["openBlock"])(),Object(c["createBlock"])("a",{key:0,class:["active-podcast-title w-100 underlink_hover ajaxed",{"text-xs":!r.maximized}],href:"/article/"+a.item.oid},Object(c["toDisplayString"])(a.item.title),11,["href"])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])("div",g,[a.item&&r.maximized?(Object(c["openBlock"])(),Object(c["createBlock"])("span",b,Object(c["toDisplayString"])(a.item.feed_title),1)):Object(c["createCommentVNode"])("",!0),a.item&&a.item.tts_lang&&r.maximized?(Object(c["openBlock"])(),Object(c["createBlock"])("span",_,Object(c["toDisplayString"])(a.item.tts_lang_text),1)):Object(c["createCommentVNode"])("",!0),a.item&&!a.item.tts_lang&&r.maximized?(Object(c["openBlock"])(),Object(c["createBlock"])("span",j,"Audio file")):Object(c["createCommentVNode"])("",!0)])])])])]),r.maximized?(Object(c["openBlock"])(),Object(c["createBlock"])("div",w,[Object(c["createVNode"])("div",{onClick:t[3]||(t[3]=function(){return a.togglePlay&&a.togglePlay.apply(a,arguments)}),class:["play-button ml-1",{pause:!r.paused,play:r.paused}]},[O,x],2)])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])("div",{class:["d-flex align-items-center justify-content-start col p-0 player-flex-col-2",{"flex-column":r.maximized}]},[Object(c["createVNode"])("div",k,[Object(c["createVNode"])("div",{class:["align-items-center media-player-control-buttons-wrapper w-100 justify-content-center",{"d-flex":r.maximized}]},[Object(c["createVNode"])("ul",{class:["nav d-flex align-items-center m-0",{"mini-play-pause":!r.maximized}]},[Object(c["createVNode"])("li",{class:["nav-item",{"d-none":!r.maximized}]},[Object(c["createVNode"])("a",{onClick:t[4]||(t[4]=function(e){return a.skipSeconds(-10)}),class:["nav-link",{disabled:a.item&&a.item.tts_lang}],href:"javascript:void(0)"},[C],2)],2),Object(c["createVNode"])("li",{class:["nav-item",{"d-none":!r.maximized}]},[Object(c["createVNode"])("a",{onClick:t[5]||(t[5]=function(){return a.playPrev&&a.playPrev.apply(a,arguments)}),class:"nav-link graylink",href:"javascript:void(0)"},[L])],2),r.maximized?(Object(c["openBlock"])(),Object(c["createBlock"])("li",N,[Object(c["createVNode"])("a",V,[Object(c["createVNode"])("div",{onClick:t[6]||(t[6]=function(){return a.togglePlay&&a.togglePlay.apply(a,arguments)}),class:["icon32",{"icon-player-pause graylink":!r.paused,"icon-inline-player-play-btn bluelink":r.paused,loading:r.loading}],style:{"margin-top":"2px",cursor:"pointer"}},[A,S],2)])])):Object(c["createCommentVNode"])("",!0),r.maximized?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])("li",P,[Object(c["createVNode"])("a",B,[Object(c["createVNode"])("div",{onClick:t[7]||(t[7]=function(){return a.togglePlay&&a.togglePlay.apply(a,arguments)}),class:["icon16",{"icon-player-playlist-pause graylink":!r.paused,"icon-player-playlist-play bluelink":r.paused,loading:r.loading}],style:{cursor:"pointer"}},[T,E],2)])])),Object(c["createVNode"])("li",{class:["nav-item",{"d-none":!r.maximized}]},[Object(c["createVNode"])("a",{onClick:t[8]||(t[8]=function(){return a.playNext&&a.playNext.apply(a,arguments)}),class:["nav-link",{"btn-disabled":r.playlist.length<=1||r.playlist.indexOf(a.item)===r.playlist.length-1}],href:"javascript:void(0)"},[z],2)],2),Object(c["createVNode"])("li",{class:["nav-item",{"d-none":!r.maximized}]},[Object(c["createVNode"])("a",{onClick:t[9]||(t[9]=function(e){return a.skipSeconds(10)}),class:["nav-link",{disabled:a.item&&a.item.tts_lang}],href:"javascript:void(0)"},[M],2)],2)],2)],2)]),Object(c["createVNode"])("div",{class:["flex w-100",{"order-1":!r.maximized,"pt-1":r.maximized}],style:{height:"23px"}},[Object(c["withDirectives"])(Object(c["createVNode"])("div",{class:"player-time graylink mr-2"},Object(c["toDisplayString"])(a.sec_to_time(r.current_time)),513),[[c["vShow"],r.maximized||a.item.tts_lang]]),Object(c["withDirectives"])(Object(c["createVNode"])("div",I,[Object(c["withDirectives"])(Object(c["createVNode"])("div",{class:"progress progress-time hover-reveal",onClick:t[11]||(t[11]=function(){return a.progressClick&&a.progressClick.apply(a,arguments)}),ref:"progress",onPointermove:t[12]||(t[12]=function(){return a.hoverProgress&&a.hoverProgress.apply(a,arguments)}),onPointerover:t[13]||(t[13]=function(e){return a.watchMouse(!0)}),onMouseup:t[14]||(t[14]=function(e){return a.watchMouse(!1)}),"data-tippy-content":r.progress_title},[Object(c["createVNode"])("div",{class:"progress-bar",role:"progressbar","aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100",style:a.progressStyle},[Object(c["createVNode"])("div",{class:"rounded-circle bg-primary",style:[{position:"absolute",width:"12px",height:"12px"},{left:a.progressPerc+"%"}],onPointerdown:t[10]||(t[10]=function(){return a.setDrag&&a.setDrag.apply(a,arguments)})},null,36)],4)],40,["data-tippy-content"]),[[c["vShow"],r.maximized&&a.item&&!a.item.tts_lang],[ee,{followCursor:!0,delay:0,dynamic:!0}]]),Object(c["withDirectives"])(Object(c["createVNode"])("div",D,null,512),[[c["vShow"],r.maximized&&a.item&&a.item.tts_lang]])],512),[[c["vShow"],r.maximized]]),Object(c["withDirectives"])(Object(c["createVNode"])("div",{class:["player-time text-right graylink",{"ml-2":r.maximized}]},Object(c["toDisplayString"])(a.item.tts_lang?"— : —":a.sec_to_time(r.current_time-r.total_time)),3),[[c["vShow"],r.maximized||!a.item.tts_lang]])],2)],2),Object(c["createVNode"])("div",R,[Object(c["createVNode"])("div",U,[r.maximized?(Object(c["openBlock"])(),Object(c["createBlock"])(J,{key:0,value:r.speed_menu,"onUpdate:value":t[15]||(t[15]=function(e){return r.speed_menu=e}),right:!0,hover:!0,class:"dropup",styles:{position:"absolute",right:"auto","max-width":"80px"}},{dropdown:s((function(){return[Object(c["createVNode"])("div",Y,[F,(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(r.playbackRates,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])("a",{class:["dropdown-item",{selected:e.value===r.playbackRate}],key:e.value,onClick:function(t){return a.setPlaybackRate(e)},style:{position:"relative","padding-left":"2rem"}},[Object(c["withDirectives"])(Object(c["createVNode"])("span",q,[G],512),[[c["vShow"],e.value===r.playbackRate]]),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.title),1)],10,["onClick"])})),128))])]})),default:s((function(){return[Object(c["createVNode"])("a",X,Object(c["toDisplayString"])(r.playbackRate)+"x ",1)]})),_:1},8,["value"])):Object(c["createCommentVNode"])("",!0),r.volume_menu&&r.maximized?(Object(c["openBlock"])(),Object(c["createBlock"])(K,{key:1,value:r.volume,"onUpdate:value":t[16]||(t[16]=function(e){return r.volume=e})},null,8,["value"])):Object(c["createCommentVNode"])("",!0)]),Object(c["createVNode"])("div",H,[r.maximized?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])("a",{key:0,href:"javascript:void(0)",class:["btn-playlist flex justify-content-center",{active:"playlist"===r.tab||r.adding}],onClick:t[17]||(t[17]=function(e){return r.tab=!r.tab&&"playlist"})},[Object(c["createVNode"])("i",{class:["icon16 icon-player-playlist-menu graylink",{bluelink:r.adding,graylink:!r.adding}]},null,2)],2)),a.isMobile?Object(c["createCommentVNode"])("",!0):Object(c["withDirectives"])((Object(c["openBlock"])(),Object(c["createBlock"])("a",{key:1,onClick:t[18]||(t[18]=function(){return a.clickMaximize&&a.clickMaximize.apply(a,arguments)}),href:"javascript:void(0)",class:"resize-btn graylink flex justify-content-center","data-tippy-content":r.maximized?e.$gettext("Collapse"):e.$gettext("Expand")},[Object(c["createVNode"])("span",{class:["graylink icon16",{"icon-player-maximize":!r.maximized,"icon-player-minimize-1":r.maximized}]},null,2)],8,["data-tippy-content"])),[[ee,{dynamic:!0}]]),Object(c["createVNode"])("div",Z,[Object(c["withDirectives"])(Object(c["createVNode"])("a",{onClick:t[19]||(t[19]=function(){return a.stopPlayer&&a.stopPlayer.apply(a,arguments)}),href:"javascript:void(0)",class:"resize-btn flex justify-content-center","data-tippy-content":e.$gettext("Minimize")},[W],8,["data-tippy-content"]),[[ee]])])])])])],2)],2),[[c["vShow"],!r.stopped]]),Object(c["withDirectives"])(Object(c["createVNode"])("div",{key:"stopped",style:[{"background-color":"transparent",position:"fixed",right:"0"},{bottom:a.isMobile?"20px":"-8px"}]},[Object(c["createVNode"])("a",{class:["btn btn-sm btn-circle flex justify-content-center flex align-items-center",{"btn-secondary":r.paused,"btn-primary":!r.paused,"btn-flashing":r.adding}],href:"javascript:void(0)",onClick:t[20]||(t[20]=function(e){return r.stopped=!1}),style:{padding:"6px"}},[Q],2)],4),[[c["vShow"],r.stopped]])]})),_:1}),Object(c["createVNode"])("audio",{id:"audio-element-big",ref:"player",preload:"none",onTimeupdate:t[21]||(t[21]=function(){return a.onTimeUpdateListener&&a.onTimeUpdateListener.apply(a,arguments)}),onDurationchange:t[22]||(t[22]=function(){return a.onDurationChange&&a.onDurationChange.apply(a,arguments)}),onPlaying:t[23]||(t[23]=function(){return a.onPlay&&a.onPlay.apply(a,arguments)}),onPause:t[24]||(t[24]=function(e){return r.paused=!0}),onLoadstart:t[25]||(t[25]=function(e){return r.loading=!1}),onLoadedmetadata:t[26]||(t[26]=function(e){return r.loading=!1}),onError:t[27]||(t[27]=function(){return a.onError&&a.onError.apply(a,arguments)}),onEnded:t[28]||(t[28]=function(){return a.playNext&&a.playNext.apply(a,arguments)})}," Audio is not supported ",544)],38)):Object(c["createCommentVNode"])("",!0)})),K=i("a78e"),ee=function(e){if(isNaN(e)||!Number.isFinite(e))return"00:00";try{var t=new Date(null);t.setSeconds(Math.abs(e));var i=t.toISOString().substr(11,8);return"00"===i.substring(0,2)&&(i=i.substring(3)),(e<0?"-":"")+i}catch(n){console.log(e,n)}},te=Object(c["withScopeId"])("data-v-77248de5"),ie=te((function(e,t,i,n,r,a){return Object(c["openBlock"])(),Object(c["createBlock"])("div",{class:["dropdown",{dropup:r.top}],onMouseleave:t[4]||(t[4]=function(){return a.mouseLeave&&a.mouseLeave.apply(a,arguments)}),onMouseover:t[5]||(t[5]=function(){return a.mouseOver&&a.mouseOver.apply(a,arguments)}),onMouseenter:t[6]||(t[6]=function(){return a.mouseEnter&&a.mouseEnter.apply(a,arguments)}),onClick:t[7]||(t[7]=function(){return a.toggleMenu&&a.toggleMenu.apply(a,arguments)})},[Object(c["renderSlot"])(e.$slots,"default"),Object(c["createVNode"])(c["Transition"],{name:i.transition},{default:te((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])("div",{class:["dropdown-menu show",{"dropdown-menu-right":i.right}],style:i.styles,onMouseleave:t[1]||(t[1]=function(){return a.startTimer&&a.startTimer.apply(a,arguments)}),onMouseenter:t[2]||(t[2]=function(){return a.stopTimer&&a.stopTimer.apply(a,arguments)}),onClick:t[3]||(t[3]=Object(c["withModifiers"])((function(){}),["stop"])),ref:"dropdown"},[Object(c["renderSlot"])(e.$slots,"dropdown")],38),[[c["vShow"],i.value]])]})),_:3},8,["name"])],34)}));function ne(e){return ne="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}var re={props:{value:Boolean,right:Boolean,hover:Boolean,hover_time:{type:Number,default:100},hover_timeout:{type:Number,default:500},styles:{type:Object,default:function(){return{}}},interactive:{type:Boolean,default:!1},transition:{type:String,default:""},closeOnClickOutside:{type:Boolean,default:!0}},data:function(){return{hovering:!1,top:!1}},unmounted:function(){document.body.removeEventListener("click",this.closeMenu)},methods:{mouseEnter:function(){var e=this;this.stopTimer(),this.hover&&this.hover_time>0&&!this.value&&(this.hoverOpenTimer=setTimeout((function(){e.$emit("update:value",!0),e.hovering=!0,setTimeout((function(){e.hovering=!1}),e.hover_timeout)}),this.hover_time)),this.hover&&!this.value&&0===this.hover_time&&(this.hovering=!0,setTimeout((function(){e.hovering=!1}),this.hover_timeout),this.$emit("update:value",!0))},mouseLeave:function(){this.hoverTimer||this.startTimer(),this.hover_time>0&&this.hover&&clearTimeout(this.hoverOpenTimer)},mouseOver:function(){this.stopTimer()},closeMenu:function(e){e&&this.$el.contains(e.target)||this.value&&this.closeOnClickOutside&&this.$emit("update:value",!1)},toggleMenu:function(){this.hovering||this.value&&this.hover||this.$emit("update:value",!this.value)},stopTimer:function(){clearTimeout(this.hoverTimer),this.hoverTimer=null},startTimer:function(){this.interactive||(this.hoverTimer=setTimeout(this.closeMenu,this.hover_timeout))}},watch:{value:function(e){var t=this;if(e){var i=this;this.top=!1,this.$nextTick((function(){var e=i.$refs.dropdown.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight;t.top=e.bottom>n&&e.top>=e.height}))}},interactive:{handler:function(e){"object"===("undefined"===typeof document?"undefined":ne(document))&&(e?document.body.addEventListener("click",this.closeMenu):document.body.removeEventListener("click",this.closeMenu))},immediate:!0}}};i("2610");re.render=ie,re.__scopeId="data-v-77248de5";var ae=re,oe=Object(c["withScopeId"])("data-v-3208241e");Object(c["pushScopeId"])("data-v-3208241e");var le={class:"volume-control"},ce={class:"flex"},se={style:{position:"relative",display:"contents"}};Object(c["popScopeId"])();var ue=oe((function(e,t,i,n,r,a){return Object(c["openBlock"])(),Object(c["createBlock"])("div",le,[Object(c["createVNode"])("div",ce,[Object(c["createVNode"])("i",{class:[a.volumeIcon,"graylink"]},null,2),Object(c["createVNode"])("div",se,[Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"range","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.volume=e}),height:4,width:64,ref:"volumeSlider",class:"volume-slider",step:"0.5",min:"1",max:"100",style:a.volumeStyle},null,4),[[c["vModelText"],a.volume]])])])])})),de={name:"VolumeControl",props:{value:Number},computed:{volume:{get:function(){return this.value},set:function(e){this.$emit("update:value",parseFloat(e))}},volumeStyle:function(){return{"--volume-width":"".concat(this.volume,"%")}},volumeIcon:function(){var e={};return 0===this.volume?e["icon16 icon-player-volume-0"]=!0:this.volume<25?e["icon16 icon-player-volume-25"]=!0:this.volume<50?e["icon16 icon-player-volume-50"]=!0:e["icon16 icon-player-volume"]=!0,e}}};i("f16a");de.render=ue,de.__scopeId="data-v-3208241e";var pe=de,me=Object(c["withScopeId"])("data-v-4150094e");Object(c["pushScopeId"])("data-v-4150094e");var he={width:"48px",height:"48px",viewBox:"0 0 160 160",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},fe=Object(c["createVNode"])("title",null,"player-tts-placeholder",-1),ye=Object(c["createVNode"])("g",{id:"player-tts-placeholder",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},[Object(c["createVNode"])("path",{d:"M57.7445981,38 L64.1277009,38 L73.7649346,65.9999561 L76.1846729,66.4135448 L76.1846729,68.8950771 L63.8773832,68.8950771 L63.8773832,66.4135448 L67.0063551,65.9999561 L65.3792897,60.6233028 L54.5739065,60.6233028 L52.9468411,66.041315 L56.3261308,66.4135448 L56.3261308,68.8950771 L45.6876262,68.8950771 L45.6459065,66.4135448 L48.1490841,65.9999561 L57.7445981,38 Z M60.6232523,44.9896493 L59.8722991,41.7636573 L59.0796262,45.0310082 L55.3665794,57.7281818 L64.5448972,57.7281818 L60.6232523,44.9896493 Z M113.64486,46.4138995 C114.945568,46.4138995 116,47.4592139 116,48.7486746 C116,49.9951532 115.014692,51.0134907 113.77408,51.0799949 L113.64486,51.0834496 L86.728972,51.0834496 C85.428264,51.0834496 84.3738318,50.0381352 84.3738318,48.7486746 C84.3738318,47.5021959 85.3591401,46.4838584 86.599752,46.4173543 L86.728972,46.4138995 L113.64486,46.4138995 Z M113.64486,81.3721748 C114.945568,81.3721748 116,82.4174891 116,83.7069498 C116,84.9534284 115.014692,85.9717659 113.77408,86.0382701 L113.64486,86.0417248 L46.3551402,86.0417248 C45.0544322,86.0417248 44,84.9964104 44,83.7069498 C44,82.4604712 44.9853083,81.4421337 46.2259202,81.3756295 L46.3551402,81.3721748 L113.64486,81.3721748 Z M113.64486,63.8930372 C114.945568,63.8930372 116,64.9383515 116,66.2278122 C116,67.4742908 115.014692,68.4926283 113.77408,68.5591325 L113.64486,68.5625872 L86.728972,68.5625872 C85.428264,68.5625872 84.3738318,67.5172728 84.3738318,66.2278122 C84.3738318,64.9813336 85.3591401,63.9629961 86.599752,63.8964919 L86.728972,63.8930372 L113.64486,63.8930372 Z M113.64486,98.8513124 C114.945568,98.8513124 116,99.8966267 116,101.186087 C116,102.432566 115.014692,103.450903 113.77408,103.517408 L113.64486,103.520862 L46.3551402,103.520862 C45.0544322,103.520862 44,102.475548 44,101.186087 C44,99.9396088 44.9853083,98.9212713 46.2259202,98.8547671 L46.3551402,98.8513124 L113.64486,98.8513124 Z M113.64486,116.33045 C114.945568,116.33045 116,117.375764 116,118.665225 C116,119.911704 115.014692,120.930041 113.77408,120.996545 L113.64486,121 L46.3551402,121 C45.0544322,121 44,119.954686 44,118.665225 C44,117.418746 44.9853083,116.400409 46.2259202,116.333905 L46.3551402,116.33045 L113.64486,116.33045 Z",id:"tts",fill:"#000000","fill-rule":"nonzero"})],-1);Object(c["popScopeId"])();var ve=me((function(e,t,i,n,r,a){return Object(c["openBlock"])(),Object(c["createBlock"])("svg",he,[fe,ye])})),ge={name:"PlayerTtsPlaceholderImage"};i("a244");ge.render=ve,ge.__scopeId="data-v-4150094e";var be=ge,_e=Object(c["withScopeId"])("data-v-f3b17830");Object(c["pushScopeId"])("data-v-f3b17830");var je={width:"48px",height:"48px",viewBox:"0 0 160 160",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},we=Object(c["createVNode"])("title",null,"player-audio-placeholder",-1),Oe=Object(c["createVNode"])("g",{id:"player-audio-placeholder",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},[Object(c["createVNode"])("path",{d:"M80.1757322,32 C84.9560149,32 88.8447086,35.8034011 88.9597241,40.5386426 L88.9623431,40.7545126 L88.9623431,93.631769 L88.9652272,93.795047 C89.0515092,96.2336128 91.0628277,98.1841155 93.5313808,98.1841155 C95.9826931,98.1841155 97.9831354,96.2607627 98.0954453,93.8460689 L98.1004184,93.631769 L98.1004184,58.2635379 C98.1004184,53.4285541 102.034318,49.5090253 106.887029,49.5090253 C111.667312,49.5090253 115.556006,53.3124264 115.671021,58.0476679 L115.67364,58.2635379 L115.67364,91.5306859 C115.67364,94.0695208 117.588172,96.0830325 119.891213,96.0830325 C119.982223,96.0830325 120.071886,96.0887767 120.159858,96.099921 L138.5,96.1 C139.659798,96.1 140.6,97.040202 140.6,98.2 C140.6,99.309372 139.739777,100.217828 138.649973,100.294727 L138.5,100.3 L119.5,100.3 C119.320988,100.3 119.147207,100.277601 118.981307,100.235454 C114.798996,99.7711894 111.562507,96.1455806 111.45864,91.7487305 L111.456067,91.5306859 L111.456067,58.2635379 C111.456067,55.7493463 109.410439,53.7111913 106.887029,53.7111913 C104.418476,53.7111913 102.407158,55.6616941 102.320876,58.1002598 L102.317992,58.2635379 L102.317992,93.631769 L102.315373,93.847639 C102.200357,98.5828805 98.3116634,102.386282 93.5313808,102.386282 C88.7653251,102.386282 84.8855593,98.6054861 84.748516,93.8898931 L84.7447699,93.631769 L84.7447699,40.7545126 C84.7447699,38.240321 82.699142,36.2021661 80.1757322,36.2021661 C77.7071791,36.2021661 75.6958607,38.1526688 75.6095787,40.5912346 L75.6066946,40.7545126 L75.6066946,120.245487 L75.6040756,120.461357 C75.48906,125.196599 71.6003663,129 66.8200837,129 C62.054028,129 58.1742622,125.219205 58.0372189,120.503611 L58.0334728,120.245487 L58.0334728,98.534296 L58.0370526,98.4108414 C58.0380707,98.3933346 58.0393039,98.3758852 58.0407497,98.3584959 C58.0392566,98.3418552 58.0380511,98.3247403 58.0370526,98.3075701 L58.0334728,98.1841155 L58.0334728,58.2635379 C58.0334728,55.7493463 55.987845,53.7111913 53.4644351,53.7111913 C50.9958821,53.7111913 48.9845636,55.6616941 48.8982816,58.1002598 L48.8953975,58.2635379 L48.8953975,91.5306859 L48.8927785,91.7465559 C48.7849669,96.1852093 45.3613955,99.8050968 40.995813,100.241141 C40.8837999,100.268244 40.7682385,100.286382 40.6499734,100.294727 L40.5,100.3 L21.5,100.3 C20.340202,100.3 19.4,99.359798 19.4,98.2 C19.4,97.090628 20.2602226,96.1821718 21.3500266,96.1052727 L21.5,96.1 L39.8401424,96.099921 C39.9281137,96.0887767 40.0177769,96.0830325 40.1087866,96.0830325 C42.560099,96.0830325 44.5605412,94.1596797 44.6728511,91.7449858 L44.6778243,91.5306859 L44.6778243,58.2635379 C44.6778243,53.4285541 48.611724,49.5090253 53.4644351,49.5090253 C58.2447178,49.5090253 62.1334115,53.3124264 62.248427,58.0476679 L62.251046,58.2635379 L62.251046,98.1841155 C62.251046,98.2431478 62.2486026,98.3016115 62.243811,98.3594116 L62.2492254,98.4462374 L62.251046,98.534296 L62.251046,120.245487 L62.2539301,120.408765 C62.3402122,122.847331 64.3515306,124.797834 66.8200837,124.797834 C69.2713961,124.797834 71.2718383,122.874481 71.3841482,120.459787 L71.3891213,120.245487 L71.3891213,40.7545126 C71.3891213,35.9195288 75.323021,32 80.1757322,32 Z",id:"Combined-Shape",fill:"#000000","fill-rule":"nonzero"})],-1);Object(c["popScopeId"])();var xe=_e((function(e,t,i,n,r,a){return Object(c["openBlock"])(),Object(c["createBlock"])("svg",je,[we,Oe])})),ke={name:"PlayerAudioPlaceholderImage"};i("8da3");ke.render=xe,ke.__scopeId="data-v-f3b17830";var Ce=ke,Le=function(e){var t=e.split("#");return t.length>1?t[0]:e};function Ne(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var $e=Object(c["withScopeId"])("data-v-42f6f012");Object(c["pushScopeId"])("data-v-42f6f012");var Ve={class:"playing-queue-ttl flex"},Ae=Object(c["createVNode"])("i",{class:"icon16 icon-arrow_down_small graylink mr-2"},null,-1),Se={class:"folder_dialog_line_header"},Pe={key:0,class:"p-3"},Be={class:"graylink"},Te={class:"flex align-items-center"},Ee={key:1,class:"icon14 icon-question-mark error_red","data-tippy-content":"The file is not available."},ze={key:3,class:"player-article-image"},Me={class:"d-flex flex-grow-1 flex-column pr-2 dropdown-item-content",style:{"min-width":"0",cursor:"pointer"}},Ie={class:"playlist-title-text"},De={key:0,class:"flex"},Re={key:0,class:"ml-2 tts-title-tag graylink_darker"},Ue={key:1,class:"ml-2 tts-title-tag text-primary-color"},Xe={class:"flex"},Ye={class:"d-flex blue-link hover-only delete-from-playlist",style:{cursor:"pointer"},href:"javascript:void(0)"};Object(c["popScopeId"])();var Fe=$e((function(e,t,i,n,r,a){var o=Object(c["resolveComponent"])("player-tts-placeholder-image"),l=Object(c["resolveComponent"])("player-audio-placeholder-image"),s=Object(c["resolveDirective"])("tippy");return Object(c["openBlock"])(),Object(c["createBlock"])("div",{class:["playlist border-bottom",Ne({"pb-2":i.maximized},"pb-2",!i.maximized)]},[Object(c["createVNode"])("div",{class:["flex dropdown-header mx-auto border-bottom py-3 justify-content-between",{"container px-4":i.maximized&&!i.isMobile,"px-2":!i.maximized,"px-1":i.isMobile}]},[Object(c["createVNode"])("div",Ve,[Object(c["createVNode"])("a",{href:"javascript:void(0)",class:["flex btn btn-sm m-0 p-0",{active:i.active}],onClick:t[1]||(t[1]=function(t){return e.$emit("togglePlaylist")})},[Ae,Object(c["createVNode"])("span",Se,Object(c["toDisplayString"])(e.$gettext("Playing Queue")),1)],2)]),Object(c["createVNode"])("a",{href:"javascript:void(0);",onClick:t[2]||(t[2]=function(t){return e.$emit("clearPlaylist")}),class:"graylink font-weight-light text-sm"},Object(c["toDisplayString"])(e.$gettext("Clear all")),1)],2),Object(c["createVNode"])("div",{class:["container mb-2",{"px-0":!i.maximized}],style:{"max-height":"260px"}},[0===i.playlist.length?(Object(c["openBlock"])(),Object(c["createBlock"])("div",Pe,[Object(c["createVNode"])("span",Be,Object(c["toDisplayString"])(e.$gettext("Playlist is empty")),1)])):Object(c["createCommentVNode"])("",!0),(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(i.playlist,(function(n){return Object(c["openBlock"])(),Object(c["createBlock"])("div",{key:n.url,class:["px-0 dropdown-item hover-reveal",{tts_user_downgraded:n.require_pro&&n.tts_lang,active:n.url===i.current_item,"pl-2 py-2":i.maximized&&!i.isMobile,"py-0 pl-2":!i.maximized,"py-2 pl-2":i.isMobile}],onClick:function(t){return e.$emit("playItem",n,!0)}},[Object(c["createVNode"])("div",Te,[i.paused||i.current_item!==n.url?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])("a",{key:0,class:["flex hover-only playlist-pause-btn justify-content-center",{"mr-2":!i.maximized}],style:{cursor:"pointer"},href:"javascript:void(0)",onClick:t[3]||(t[3]=Object(c["withModifiers"])((function(t){return e.$emit("togglePlay")}),["stop"]))},[Object(c["createVNode"])("i",{class:["",{"icon19 icon-shield icon-yellow":n.require_pro&&i.maximized&&n.tts_lang,"icon14 icon-shield icon-yellow":n.require_pro&&!i.maximized&&n.tts_lang,"icon16 icon-player-playlist-pause":!n.require_pro||!n.tts_lang,bluelink:i.current_item===n.url,graylink:i.current_item!==n.url}]},null,2)],2)),i.paused||i.current_item!==n.url?(Object(c["openBlock"])(),Object(c["createBlock"])("a",{key:1,class:["flex playlist-play-btn justify-content-center",{"mr-2":!i.maximized}],style:{cursor:"pointer"},href:"javascript:void(0)"},[n.has_error?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])("i",{key:0,class:["",{"icon19 icon-shield icon-yellow":n.require_pro&&i.maximized&&n.tts_lang,"icon14 icon-shield icon-yellow":n.require_pro&&!i.maximized&&n.tts_lang,"icon16 icon-player-playlist-play":!n.require_pro||!n.tts_lang,bluelink:i.current_item===n.url,graylink:i.current_item!==n.url}],onClick:Object(c["withModifiers"])((function(t){return e.$emit("playItem",n,!0)}),["stop"])},null,10,["onClick"])),n.has_error?Object(c["withDirectives"])((Object(c["openBlock"])(),Object(c["createBlock"])("span",Ee,null,512)),[[s]]):Object(c["createCommentVNode"])("",!0)],2)):Object(c["createCommentVNode"])("",!0),i.maximized&&n.article_image?(Object(c["openBlock"])(),Object(c["createBlock"])("div",{key:2,class:"player-article-image",style:n.image_style},null,4)):Object(c["createCommentVNode"])("",!0),i.maximized&&!n.article_image?(Object(c["openBlock"])(),Object(c["createBlock"])("div",ze,[n.tts_lang?(Object(c["openBlock"])(),Object(c["createBlock"])(o,{key:0})):Object(c["createCommentVNode"])("",!0),n.tts_lang?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])(l,{key:1}))])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])("div",Me,[Object(c["createVNode"])("a",{href:"javascript:void(0)",class:["text-truncate flex",{"text-sm":!i.maximized,"pb-1":i.maximized,"":i.current_item!==n.url,bluelink:i.current_item===n.url&&!n.has_error,error_red:n.has_error}]},[Object(c["createVNode"])("span",Ie,Object(c["toDisplayString"])(n.title),1)],2),i.maximized?(Object(c["openBlock"])(),Object(c["createBlock"])("div",De,[Object(c["createVNode"])("a",{to:n.feed_url,class:"flex align-items-center text-truncate",style:{"font-weight":"normal","font-size":"11px"}},[Object(c["createVNode"])("span",{class:["graylink_darker text-truncate",{error_red:n.has_error}]},Object(c["toDisplayString"])(n.feed_title),3)],8,["to"]),n.tts_lang?(Object(c["openBlock"])(),Object(c["createBlock"])("span",Re,Object(c["toDisplayString"])(n.tts_lang_text),1)):(Object(c["openBlock"])(),Object(c["createBlock"])("span",Ue,"Audio file"))])):Object(c["createCommentVNode"])("",!0)]),Object(c["createVNode"])("div",Xe,[Object(c["createVNode"])("a",Ye,[Object(c["createVNode"])("i",{class:"icon16 icon-add-menu-button-close m-2 text-xs graylink",onClick:Object(c["withModifiers"])((function(t){return e.$emit("removePlaylistItem",n)}),["stop"])},null,8,["onClick"])])])])],10,["onClick"])})),128))],2)],2)})),qe={methods:{$gettext:function(e){return window._js?window._js(e):e}}},Ge={name:"MediaPlaylist",components:{PlayerAudioPlaceholderImage:Ce,PlayerTtsPlaceholderImage:be},mixins:[qe],props:{active:Boolean,maximized:Boolean,isMobile:Boolean,paused:Boolean,playlist:Array,current_item:String}};i("95b6");Ge.render=Fe,Ge.__scopeId="data-v-42f6f012";var He=Ge;function Ze(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function We(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(i),!0).forEach((function(t){Ke(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ze(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Qe(e,t,i,n,r,a,o){try{var l=e[a](o),c=l.value}catch(s){return void i(s)}l.done?t(c):Promise.resolve(c).then(n,r)}function Je(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Qe(a,n,r,o,l,"next",e)}function l(e){Qe(a,n,r,o,l,"throw",e)}o(void 0)}))}}function Ke(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var et,tt,it,nt,rt,at,ot,lt=[{value:.25,title:.25},{value:.5,title:.5},{value:.75,title:.75},{value:1,title:"Normal"},{value:1.25,title:1.25},{value:1.5,title:1.5},{value:2,title:2}],ct={name:"media-player",components:{MediaPlaylist:He,InoDropdown:ae,VolumeControl:pe,PlayerAudioPlaceholderImage:Ce,PlayerTtsPlaceholderImage:be},mixins:[qe],mounted:function(){this.$state=K["getJSON"]("ino-player"),this.loadState(),window.addEventListener("resize",this.checkMiniPlayerConstraints,{passive:!0})},unmounted:function(){window.removeEventListener("pointerup",this.setDrag),window.removeEventListener("pointermove",this.mouseMove),window.removeEventListener("resize",this.checkMiniPlayerConstraints)},data:function(){return{state_loaded:!1,playbackRates:lt,progress:0,total_time:0,current_time:0,maximized:!1,paused:!0,current_item:null,progress_title:null,hover_time:0,stopped:!0,playbackRate:1,playlist:[],playlist_menu:!1,volume:100,volume_menu:!0,speed_menu:!1,tab:!1,adding:!1,loading:!1,drag_from:!1,translateX:0,translateY:0,offsetX:32,offsetY:32,dragging_player:!1}},methods:{clickMaximize:function(){this.maximized=!this.maximized,this.saveState()},onError:function(){var e=this;if(this.item){var t=this.playlist.find((function(t){return t.url===e.item.url}));t.has_error=!0}this.loading=!1,this.playNext()},checkUrlAdded:function(){for(var e=this,t=document.querySelectorAll("[data-media-url]"),i=function(i){var n=t[i],r=e.playlist.find((function(e){var t=n.dataset.articleId;return!(!t||t!==e.article_id)||e.url===n.dataset.mediaUrl}));r?!n.classList.contains("media-item-added")&&n.classList.add("media-item-added"):n.classList.contains("media-item-added")&&n.classList.remove("media-item-added")},n=0;n<t.length;n++)i(n)},dragStart:function(e){ot=this.$el,this.maximized&&!this.stopped||!ot.classList.contains("media-player")||(et=e.clientX,tt=e.clientY,it=ot.getBoundingClientRect(),document.body.addEventListener("pointermove",this.userMoved,{passive:!1}),document.body.addEventListener("pointerup",this.userReleased,{passive:!1}),document.body.addEventListener("pointercancel",this.userReleased,{passive:!1}))},userMoved:function(e){at||(nt=e.clientX-et,rt=e.clientY-tt,this.dragging_player||(this.dragging_player=Math.abs(nt)>10||Math.abs(rt)>10),this.dragging_player&&(at=requestAnimationFrame(this.userMovedRaf))),e.preventDefault()},userMovedRaf:function(){var e=it.left+nt,t=window.innerWidth-(it.right+nt);this.translateX=nt-(e<0?e:0)+(t<0?t:0);var i=it.top+rt,n=window.innerHeight-(it.bottom+rt);this.translateY=rt-(i<0?i:0)+(n<0?n:0),at=null},userReleased:function(e){var t=this;return document.body.removeEventListener("pointermove",this.userMoved),document.body.removeEventListener("pointerup",this.userReleased),document.body.removeEventListener("pointercancel",this.userReleased),at&&(cancelAnimationFrame(at),at=null),!!this.dragging_player&&(this.offsetX=window.innerWidth-it.right-this.translateX,this.offsetY=window.innerHeight-it.bottom-this.translateY,this.translateX=0,this.translateY=0,nt=rt=null,this.saveState(),this.$nextTick((function(){return t.dragging_player=!1})),this.$nextTick(this.checkMiniPlayerConstraints),e.preventDefault(),e.stopPropagation(),!1)},checkMiniPlayerConstraints:function(){if(!this.$el||!this.$el.getBoundingClientRect)return!1;this.maximized||this.stopped||(it=this.$el.getBoundingClientRect(),it.left<0?this.offsetX+=it.left:it.right>window.innerWidth-16&&(this.offsetX-=window.innerWidth-16-it.right),it.top<0?this.offsetY+=it.top:it.bottom>window.innerHeight&&(this.offsetY-=window.innerHeight-it.bottom))},sec_to_time:ee,clearPlaylistItems:function(){this.playlist=[]},removePlaylistItem:function(e){e["url"]===this.current_item&&this.playNext(),this.playlist.splice(this.playlist.indexOf(e),1);var t=e["url"];e.tts_lang&&(t+="#tts="+e.tts_lang),window.xajax_delete_audio(e["article_id"],t)},setPlaylist:function(e){var t=this,i=e.map((function(e){var i=e.url.split("#");if(i.length>1){e.url=i[0];var n=i[1].split("=");2===n.length&&(e.tts_lang=n[1],e.tts_lang_text=t.getLangText(n[1]))}return e.article_image&&(e.image_style=Ke({},"background-image","url(".concat(e.article_image,")"))),e}));this.playlist=i},skipSeconds:function(e){var t=this.$refs.player.currentTime;t+e>0&&t+e<this.$refs.player.duration&&(this.$refs.player.currentTime=t+e)},playNext:function(){var e=null;if(this.playlist.length)if(this.item){var t=this.playlist.indexOf(this.item);-1!==t&&this.playlist.length-1>t&&(e=this.playlist[t+1])}else e=this.playlist[0];e&&this.playItem(e,!0)},playPrev:function(){if(this.current_time>3&&this.$refs.player)return this.$refs.player.duration>0&&!this.$refs.player.paused&&(this.$refs.player.pause(),this.$refs.player.currentTime=0,this.$refs.player.play()),!1;var e=null;if(this.playlist.length)if(this.item){var t=this.playlist.indexOf(this.item);t>0&&(e=this.playlist[t-1])}else e=this.playlist[0];e&&this.playItem(e,!0)},stopPlayer:function(){this.stopped=!0},saveState:function(){K["set"]("ino-player",{current_item:this.current_item,volume:this.volume,playbackRate:this.playbackRate,current_time:this.current_time,maximized:this.maximized,stopped:this.stopped,offset:{offsetX:this.offsetX,offsetY:this.offsetY}})},loadState:function(e){this.setPlaylist(window.audio_player_playlist||[]),this.$state&&(this.maximized=this.$state.maximized||!1,this.volume=this.$state.volume||100,this.stopped=this.$state.stopped,this.$state.offset&&(this.offsetX=this.$state.offset.offsetX,this.offsetY=this.$state.offset.offsetY,this.$nextTick(this.checkMiniPlayerConstraints))),this.$state&&e&&(this.state_loaded=!0,this.setPlaybackRate({value:this.$state.playbackRate}),this.$state.current_item&&(this.current_item=this.$state.current_item,this.playItem({url:this.$state.current_item})),this.$state.current_time&&(this.$refs.player.currentTime=this.$state.current_time))},setPlaybackRate:function(e){this.$refs.player.playbackRate=e.value,this.playbackRate=e.value},playItem:function(e,t){if(!this.paused&&this.current_item===Le(e.url))return this.$refs.player.pause();this.current_item=Le(e.url),this.$refs.player.src=Le(e.url),t&&this.play()},play:function(){var e=this.$refs.player;if(!e)return!1;var t=e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>e.HAVE_CURRENT_DATA;t||(!this.current_item&&this.item.url&&(this.current_item=this.item.url),this.$refs.player.src=this.current_item,this.$refs.player.play())},onPlay:function(e){var t=this;window.ino.pauseAllPlayers(!1),this.current_item=e.target.currentSrc,this.item.require_pro&&(this.onError(),window.require_upgrade({feature:"text_to_speech"})),this.paused=!1,"playlist"===this.tab&&this.$nextTick((function(){var e=t.$el.getElementsByClassName("px-1 dropdown-item hover-reveal active")[0];e&&e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})})),this.saveState()},clearPlaylist:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!0!==e?(window.xconfirm(this.$gettext("This will clear your playlist and all saved media files.")+" "+this.$gettext("Are you sure?"),"ino.clearPlaylist(true)"),window.$("#xconfirm_modal_overlay").zIndex(1003),window.$("#xconfirm_scroll_overlay").zIndex(1004)):(this.clearPlaylistItems(),this.current_time=0,this.current_item=null,this.saveState(),window.xajax_set_audio_playlist&&window.xajax_set_audio_playlist(this.playlist,!1))},flashPlaylist:function(){var e=this;this.adding=!0,setTimeout((function(){e.adding=!1,setTimeout((function(){e.adding=!0,setTimeout((function(){e.adding=!1}),300)}),300)}),300)},getLangText:function(e){return window._js("Text to speech")+": "+window.languages.find((function(t){return t.language_code===e.substring(0,2)})).name},bindData:function(e){var t=this;return Je(l.a.mark((function i(){var n,r,a,o,c,s,u,d;return l.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!e.params||!e.params.el||2!==e.params.media_type){i.next=9;break}return n=$(e.params.el).closest(".enclosures_audio_player"),r=e.params.lang||$(n).find("input[name=lang]").val(),i.next=5,window.ino.getTTSUrl(e.article_id,r);case 5:a=i.sent,e.tts_lang=r,e.tts_lang_text=t.getLangText(r),e.url=a.url;case 9:if(t.flashPlaylist(),e.feed_url||(o=document.getElementById("article_feed_info_link_"+e.article_id),o&&(e.feed_url=o.href,e.feed_title=o.textContent),c=document.getElementById("article_favicon_"+e.article_id),c&&(e.feed_icon=c.src),s=document.getElementById("article_"+e.article_id),s&&(e.oid=s.getAttribute("data-oid"))),u=t.playlist.find((function(t){return t.url===e.url})),u){i.next=24;break}if(d=We({},e),t.playlist.push(d),!e.play){i.next=19;break}return i.next=18,t.$nextTick();case 18:t.playItem(d,!0);case 19:t.saveState(),delete d.params,window.xajax_set_audio_playlist&&window.xajax_set_audio_playlist(d),i.next=26;break;case 24:Object.assign(u,e),e.play&&t.playItem(u,!0);case 26:case"end":return i.stop()}}),i)})))()},togglePlay:function(){this.paused?this.play():this.$refs.player.pause(),this.volume=100*this.$refs.player.volume},onTimeUpdateListener:function(){if(this.$refs.player){var e=this.$refs.player.currentTime;!1===this.drag_from&&(this.current_time=e),this.total_time=this.$refs.player.duration}this.saveState()},onDurationChange:function(){},progressClick:function(){this.current_time=this.hover_time,this.$refs.player.currentTime=this.hover_time},hoverProgress:function(e){var t=this.$refs.progress.getBoundingClientRect(),i=100*(e.clientX-t.left)/t.width;this.hover_time=i*this.total_time/100,this.progress_title=ee(this.hover_time)},setDrag:function(e){this.total_time&&("pointerdown"===e.type?this.drag_from=e.pageX:this.drag_from>0&&(this.drag_from=!1,this.progressClick(e)))},mouseMove:function(e){if(this.playlist.length){var t=this.$refs.progress.getBoundingClientRect();if(this.drag_from>0){var i=e.clientX-t.left;i<0&&(i=0),i>t.width&&(i=t.width);var n=100*i/t.width;this.hoverProgress({clientX:t.left+i}),this.current_time=n*this.$refs.player.duration/100}}},watchMouse:function(e){e?(window.addEventListener("pointerup",this.setDrag),window.addEventListener("pointermove",this.mouseMove)):(window.removeEventListener("pointerup",this.setDrag),window.removeEventListener("pointermove",this.mouseMove))},checkMobile:function(){if("phone"!==window.device_type||this.stopped||this.maximized||(this.maximized=!0),window.inno_dialog_set_property)if(!this.stopped&&this.maximized&&this.playlist.length){var e=-123;"phone"===window.device_type&&(e=-142),window.inno_dialog_set_property("article_dialog","height",e)}else{var t=-10;"phone"===window.device_type&&(t=-40),window.inno_dialog_set_property("article_dialog","height",t)}this.playlist.length&&this.maximized&&!this.stopped?document.body.classList.add("media-player-maximized"):document.body.classList.remove("media-player-maximized"),window.resize&&window.resize()}},computed:{isMobile:function(){return"phone"===window.device_type},translateStyles:function(){var e={transform:"translate3d("+this.translateX+"px, "+this.translateY+"px, 0)"};return this.maximized||(e.right=this.offsetX+"px",e.bottom=this.offsetY+"px"),e},progressStyle:function(){return this.current_time?{width:this.progressPerc+"%"}:{width:0}},volumeStyle:function(){return{"--volume-width":"".concat(this.volume,"%")}},progressPerc:function(){return Math.floor(100*this.current_time/this.total_time)},volumeIcon:function(){var e={};return 0===this.volume?e["icon16 icon-player-volume-0"]=!0:this.volume<25?e["icon16 icon-player-volume-25"]=!0:this.volume<50?e["icon16 icon-player-volume-50"]=!0:e["icon16 icon-player-volume"]=!0,e},item:function(){if(this.current_item){var e=this.current_item.replace(/(^\w+:|^)\/\//,"//");return this.playlist.find((function(t){return t.url.replace(/(^\w+:|^)\/\//,"//")===e}))}return this.playlist.length?this.playlist[0]:null}},watch:{item:function(e){e&&this.$refs.player&&e.url!==this.$refs.player.currentSrc&&(this.current_item=e.url),e&&e.tts_lang&&this.$nextTick((function(){window.drawSpectrum("audio-viz-big",{audioId:"audio-element-big",width:240,height:10,clearCaps:!1,capHeight:0,meterWidth:2,meterCount:512,meterColor:[{stop:0,color:"#5B93E1"},{stop:.5,color:"#5B93E1"},{stop:1,color:"#5B93E1"}],gap:4})}))},stopped:function(){this.checkMobile(),this.saveState()},"playlist.length":{handler:function(e,t){var i=this;0===this.playlist.length&&e!==t&&(window.create_bottom_notification&&window.create_bottom_notification(this.$gettext("Player closed due to empty queue"),"info",!0,1e3,1e3),this.$refs.player.src=""),this.checkUrlAdded(),this.saveState(),this.$nextTick((function(){i.checkMobile()}))},deep:!0,immediate:!1},tab:function(){var e=this;this.tab&&this.$nextTick((function(){var t=e.$el.getElementsByClassName("px-1 dropdown-item hover-reveal active")[0];t&&t.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})}))},volume:function(e){if(!this.$refs.player)return!1;e!==100*this.$refs.player.volume&&(this.$refs.player.volume=e/100)},maximized:function(e){var t=this;this.checkMobile(),e&&this.$refs.player&&this.$nextTick((function(){return t.$refs.player.volume=t.volume/100}))}}};i("b786"),i("8550"),i("4ad0");ct.render=J,ct.__scopeId="data-v-c7f415ec";var st=ct,ut=function(e){return e.dataset.tippyContent||e.getAttribute("title")},dt={mounted:function(e,t){var i={};t.value&&Object.assign(i,t.value),e._tippy_dynamic=!!t.value&&t.value.dynamic,window.tippy(e,i)},unmounted:function(e){e._tippy.destroy()},updated:function(e,t){t&&t.value&&void 0!==t.value.enabled&&(!1===t.value.enabled?e._tippy.disable():e._tippy.enable()),e._tippy_dynamic&&e._tippy.setContent(ut(e))}},pt=Object(c["withScopeId"])("data-v-91a8dfde");Object(c["pushScopeId"])("data-v-91a8dfde");var mt={style:{overflow:"hidden"},class:"flex align-items-center w-100"},ht={id:"current-time",class:"time mr-1 graylink"},ft={key:1,id:"duration",class:"time graylink"},yt={class:"flex mx-4"};Object(c["popScopeId"])();var vt=pt((function(e,t,i,n,r,a){var o=Object(c["resolveComponent"])("volume-control"),l=Object(c["resolveComponent"])("lang-select"),s=Object(c["resolveDirective"])("tippy");return Object(c["openBlock"])(),Object(c["createBlock"])("div",{id:"audio-player-container",style:a.progressStyle,class:["d-flex align-items-center",{init:r.loading}]},[Object(c["createVNode"])("div",mt,[Object(c["createVNode"])("div",{class:["enclosures_audio_player_button_fake flex",{"loading blue-circle":r.loading}]},[Object(c["createVNode"])("span",{onClick:t[1]||(t[1]=function(){return a.togglePlay&&a.togglePlay.apply(a,arguments)}),class:["icon16 icon20 icon-inline-player-pause-btn ml-1",{"icon-inline-player-pause-btn":"play"===r.state,"icon-inline-player-play-btn":"play"!==r.state}],styles:{loading:r.is_hidden}},null,10,["styles"])],2),Object(c["createVNode"])("div",{class:["d-flex align-items-center justify-content-start w-100",{"mr-2":!a.is_mobile,"ml-2":a.is_mobile}]},[Object(c["createVNode"])("span",ht,Object(c["toDisplayString"])(a.currentTimeTitle),1),Object(c["withDirectives"])(Object(c["createVNode"])("div",{id:"audio-viz",class:{"mx-2":!a.is_mobile},style:{width:"180px"}},null,2),[[c["vShow"],r.tts_lang]]),2!==r.file_type?Object(c["withDirectives"])((Object(c["openBlock"])(),Object(c["createBlock"])("input",{key:0,type:"range",id:"seek-slider",class:"mx-2",max:r.duration,value:r.current_time,onChange:t[2]||(t[2]=function(){return a.changeCurrentTime&&a.changeCurrentTime.apply(a,arguments)}),"data-tippy-content":r.progress_title,onMousemove:t[3]||(t[3]=function(){return a.hoverProgress&&a.hoverProgress.apply(a,arguments)})},null,40,["max","value","data-tippy-content"])),[[s,{followCursor:!0,delay:0,dynamic:!0}]]):Object(c["createCommentVNode"])("",!0),2!==r.file_type?(Object(c["openBlock"])(),Object(c["createBlock"])("span",ft,Object(c["toDisplayString"])(a.durationTitle),1)):Object(c["createCommentVNode"])("",!0)],2)]),Object(c["createVNode"])("div",yt,[Object(c["createVNode"])(o,{show:r.volume_menu,value:r.volume,"onUpdate:value":t[4]||(t[4]=function(e){return r.volume=e})},null,8,["show","value"]),r.tts_lang?(Object(c["openBlock"])(),Object(c["createBlock"])(l,{key:0,modelValue:r.tts_lang,"onUpdate:modelValue":t[5]||(t[5]=function(e){return r.tts_lang=e}),detected_lang:r.tts_lang_detected},null,8,["modelValue","detected_lang"])):Object(c["createCommentVNode"])("",!0)])],6)})),gt={class:"graylink_darker",style:{"font-size":"11px"}},bt={class:"icon12 icon-feed-info graylink py-2 px-1",ref:"lang",style:{cursor:"pointer"}},_t={ref:"tippy",style:{"transition-delay":"300ms","transition-duration":"0"}},jt={class:"mt-0"};function wt(e,t,i,n,r,a){return Object(c["openBlock"])(),Object(c["createBlock"])("div",{class:"flex ml-4",onMouseover:t[2]||(t[2]=function(){return a.openTippy&&a.openTippy.apply(a,arguments)})},[Object(c["createVNode"])("input",{type:"hidden",name:"lang",value:i.modelValue},null,8,["value"]),Object(c["createVNode"])("span",gt,Object(c["toDisplayString"])(a.current_lang_text),1),Object(c["createVNode"])("span",bt,null,512),Object(c["createVNode"])("div",_t,[Object(c["createVNode"])("p",jt,Object(c["toDisplayString"])(a.$gettext("We detected that this article is in %s.").replace("%s",a.lang_text))+" "+Object(c["toDisplayString"])(a.$gettext("If you think this is wrong, you can choose another language from the menu below.")),1),Object(c["withDirectives"])(Object(c["createVNode"])("select",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.language=e}),class:"tts-tippy-language-select"},[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(r.languages,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])("option",{key:e.id,value:e.language_code},Object(c["toDisplayString"])(e.name),9,["value"])})),128))],512),[[c["vModelSelect"],a.language]])],512)],32)}var Ot={name:"LangSelect",props:{modelValue:String,detected_lang:String},mounted:function(){window.tippy(this.$refs.lang,{content:this.$refs.tippy,interactive:!0})},data:function(){return{languages:window.languages}},methods:{openTippy:function(){this.$refs.lang&&this.$refs.lang._tippy&&this.$refs.lang._tippy.show()},$gettext:function(e){return window._js?window._js(e):e}},computed:{current_lang_text:function(){var e=this,t=this.languages.find((function(t){return t.language_code===e.modelValue}));return t?t.name:""},lang_text:function(){var e=this,t=this.languages.find((function(t){return t.language_code===e.detected_lang}));return t?t.name:""},language:{get:function(){return this.modelValue},set:function(e){this.$refs.lang&&this.$refs.lang._tippy&&this.$refs.lang._tippy.hide(),this.$emit("update:modelValue",e)}}}};Ot.render=wt;var xt=Ot,kt="data:audio/ogg;base64,T2dnUwACAAAAAAAAAAAyzN3NAAAAAGFf2X8BM39GTEFDAQAAAWZMYUMAAAAiEgASAAAAAAAkFQrEQPAAAAAAAAAAAAAAAAAAAAAAAAAAAE9nZ1MAAAAAAAAAAAAAMszdzQEAAAD5LKCSATeEAAAzDQAAAExhdmY1NS40OC4xMDABAAAAGgAAAGVuY29kZXI9TGF2YzU1LjY5LjEwMCBmbGFjT2dnUwAEARIAAAAAAAAyzN3NAgAAAKWVljkCDAD/+GkIAAAdAAABICI=",Ct=function(e){console.log("media gone",e.src),e.setAttribute("src",kt),e.pause(),setTimeout((function(){e.load()})),clearInterval(window.media_monitor),window.media_monitor=null},Lt=function(e){var t=Math.floor(e/60),i=Math.floor(e%60),n=i<10?"0".concat(i):"".concat(i);return"".concat(t,":").concat(n)},Nt={name:"InlinePlayer",components:{LangSelect:xt,VolumeControl:pe},data:function(){return{ended:!1,file_type:0,tts_lang:null,tts_lang_detected:null,tts_text:null,article_id:null,url:null,progress_title:null,total_time:0,duration:0,bufferedAmount:0,bufferedPercent:"",current_time:0,state:"",hash:"",loading:!0,volume:100,volume_menu:!0,is_hidden:{visibility:"hidden"},has_error:!1,$player:null,has_retried_cors:!1}},unmounted:function(){Ct(this.$player),this.$player.removeEventListener("play",this.onPlay),this.$player.removeEventListener("pause",this.onPause),this.$player.removeEventListener("volumechange",this.volumeChange),this.$player.removeEventListener("progress",this.displayDuration),this.$player.removeEventListener("loadedmetadata",this.displayDuration),this.$player.removeEventListener("timeupdate",this.timeUpdate),this.$player.removeEventListener("error",this.onError),this.$player.removeEventListener("ended",this.onEnded)},mounted:function(){var e=this;this.$player=window.ino.initPlayer(null),this.attachEvents(),window.media_monitor||(window.media_monitor=setInterval((function(){var t=document.getElementById("audio-player-container");t||Ct(e.$player)}),1e3))},methods:{attachEvents:function(){this.$player.addEventListener("play",this.onPlay),this.$player.addEventListener("pause",this.onPause),this.$player.addEventListener("volumechange",this.volumeChange),this.$player.addEventListener("progress",this.displayDuration),this.$player.addEventListener("loadedmetadata",this.displayDuration),this.$player.addEventListener("timeupdate",this.timeUpdate),this.$player.addEventListener("error",this.onError),this.$player.addEventListener("ended",this.onEnded)},play:function(e){e===this.url&&e===this.$player.src||(this.url=e,this.$player.src=e,this.$player.load()),this.$player.play()},onEnded:function(){this.ended=!0},onPlay:function(){this.loading=!1,this.ended=!1,this.state="play"},onPause:function(){this.state="paused"},volumeChange:function(e){this.volume=100*e.target.volume},prepareTTS:function(){2===this.file_type&&this.playTTS(this.article_id,this.tts_lang)},playTTS:function(e,t){var i=this;if("paused"===this.state&&!this.ended)return this.player.play();this.loading=!0,window.ino.getTTSUrl(e,t).then((function(e){if(!1===e)return i.has_error=!0,!1;i.tts_lang=e.tts_lang,i.tts_text=e.tts_text,i.url===e.url?(i.url="",i.$nextTick((function(){i.url=e.url}))):i.url=e.url})).catch((function(){i.loading=!1,i.has_error=!0}))},$gettext:function(e){return window._js?window._js(e):e},onError:function(e){var t=this;this.has_error=!0,this.loading=!1;var i=e.target;console.log("onError",i.error.code+"; details: "+i.error.message),this.has_retried_cors||4!=i.error.code?window.ino.pauseAllPlayers():(console.log("retry"),this.has_error=!1,this.has_retried_cors=!0,this.$player=window.ino.initPlayer(this.source,!0),this.attachEvents(),this.$player.src=this.source.url,this.$player.type=this.source.type,this.$player.play().then((function(){return t.$player.crossOrigin="anonymous"})))},togglePlay:function(){"play"===this.state?this.$player.pause():this.tts_lang?this.playTTS(this.article_id,this.tts_lang):this.play(this.url)},timeUpdate:function(e){this.current_time=Math.floor(e.target.currentTime)},changeCurrentTime:function(e){this.$player.currentTime=e.target.value},hoverProgress:function(e){var t=e.offsetX/e.target.clientWidth*parseInt(e.target.getAttribute("max"),10),i=t/this.duration;return this.progress_title=ee(i*this.duration),e.clientX},displayDuration:function(){var e=this;this.$nextTick((function(){e.player&&(e.loading&&(e.loading=!1,e.player.play()),e.duration=e.player.duration,e.bufferedAmount=e.player.buffered.length?Math.floor(e.player.buffered.end(e.player.buffered.length-1)):0,e.bufferedPercent="".concat(e.bufferedAmount/e.duration*100,"%"),e.volume=100*e.player.volume)}))}},computed:{is_mobile:function(){return"phone"===window.device_type},player:function(){return this.$player},show_audio:function(){return!!this.url},currentTimeTitle:function(){return this.current_time?Lt(this.current_time):"0:00"},progressStyle:function(){return{"--buffered-width":"".concat(this.bufferedAmount/this.duration*100,"%"),"--played-width":"".concat(this.current_time/this.duration*100,"%")}},durationTitle:function(){return this.duration?Lt(this.duration):"0:00"},source:function(){return{url:this.url,type:"audio/mpeg"}}},watch:{source:function(e){var t=this;if(e.url){if(!this.player.src)return this.play(e.url),!1;setTimeout((function(){t.play(e.url)}))}},show_audio:function(e){var t=this;e&&this.$nextTick((function(){window.drawSpectrum("audio-viz",{audioId:t.player.id,width:180,height:12,clearCaps:!1,capHeight:0,meterWidth:2,meterCount:512,meterColor:[{stop:0,color:"#5B93E1"},{stop:.5,color:"#5B93E1"},{stop:1,color:"#5B93E1"}],gap:4})}))},volume:function(e){e!==100*this.player.volume&&(this.player.volume=e/100)},tts_lang:function(){this.state="change-lang",this.prepareTTS()}}};i("351e");Nt.render=vt,Nt.__scopeId="data-v-91a8dfde";var $t=Nt;function Vt(e,t,i,n,r,a,o){try{var l=e[a](o),c=l.value}catch(s){return void i(s)}l.done?t(c):Promise.resolve(c).then(n,r)}function At(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Vt(a,n,r,o,l,"next",e)}function l(e){Vt(a,n,r,o,l,"throw",e)}o(void 0)}))}}var St={$player:null,inline_players:[],mediaPlayer:function(){var e=this;window.play_audio=function(t,i,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};e.$player.bindData({article_id:t,url:i,title:n,play:r,params:a})},window.play_audio_inline=this.playInline.bind(this),document.getElementById("media-player")||(console.log("create media root"),document.body.innerHTML+='<div id="media-player"></div><audio id="audio_player" preload="none" crossorigin="anonymous"></audio>'),this.$player=Object(c["createApp"])(st).directive("tippy",dt).mount("#media-player")},pauseAllPlayers:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.inline_players.forEach((function(t){e.destroyInline(t)})),t&&this.$player&&!this.$player.paused&&this.$player.togglePlay()},playInline:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n="ae_"+t,r=document.getElementById(n),a=r.parentElement.firstElementChild.firstElementChild;if(a.__vue_app__){var o=this.inline_players.find((function(e){return e.id===n}));this.destroyInline(o)}else{this.pauseAllPlayers();var l=a.innerHTML;a.classList.remove("hidden");var s=Object(c["createApp"])($t).directive("tippy",dt).mount(a);s.hash=t,s.file_type=i,s.article_id=t.split("_")[0],2===i&&(s.tts_lang=r.dataset.detectedLang,window.bing_originals[s.article_id]&&(s.tts_lang=window.bing_originals[s.article_id]["to_lang"].substring(0,2).toLowerCase()),s.tts_lang_detected=r.dataset.detectedLang),s.url=e,this.inline_players.push({id:n,player:s,content:l,el:a})}},clearPlaylist:function(){this.$player&&this.$player.clearPlaylist(!0)},checkMediaAdded:function(e){this.$player&&this.$player.checkUrlAdded(e);var t="#article_full_contents_"+e+" [data-tippy-content]";window.tippy(t,{animation:"slide"})},checkLangChange:function(){this.inline_players.forEach((function(e){if(window.bing_originals[e.player.article_id]){var t=window.bing_originals[e.player.article_id]["to_lang"];t&&(e.player.tts_lang=t.substring(0,2).toLowerCase())}}))},destroyInline:function(e){e.el.__vue_app__.unmount(),e.el.innerHTML=e.content,this.inline_players.splice(this.inline_players.indexOf(e))},getPlayerOffset:function(){var e=0;return this.$player&&this.$player.playlist.length&&this.$player.maximized&&!St.$player.stopped&&(e="phone"===window.device_type?260:93),e},updatePlaylist:function(){this.$player&&this.$player.setPlaylist(window.audio_player_playlist||[])},getTTSUrl:function(e,t){return At(l.a.mark((function i(){var n,r,a;return l.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,n=$("#article_title_link_"+e).html(),r=$("#article_contents_inner_"+e).html(),"microblog"===$("#article_"+e).data("type")&&(n=""),i.next=6,$.post("/api/text2speech/",{content:n+"<br/> "+r,lang:t,article_id:e});case 6:if(a=i.sent,!a.error){i.next=10;break}return a.client_message&&xalert(a.client_message,"alert",!0),i.abrupt("return",!1);case 10:return a.tts_lang=a.lang.substring(0,2),a.tts_text=a.text,a.uuid&&(a.url=a.play_url),i.abrupt("return",a);case 16:return i.prev=16,i.t0=i["catch"](0),console.error(i.t0),i.abrupt("return",!1);case 20:case"end":return i.stop()}}),i,null,[[0,16]])})))()},initPlayer:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=document.getElementById("audio_player");return t&&i&&(document.getElementById("audio_player").remove(),i=null),i||(i=document.createElement("audio"),i.id="audio_player",document.body.appendChild(i)),e&&(i.src=e.url,i.type=e.type),i.preload="none",i}};window.ino=St;var Pt=St;t["default"]=Pt}})}));
//# sourceMappingURL=mediaPlayer.umd.min.js.map